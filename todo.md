# 라이브 커머스 플랫폼 백엔드 개발 To-Do

## 1. 사용자 관리 시스템

### 1.1 회원 가입/로그인/로그아웃 기능

- [x] 사용자 엔티티 및 DTO 구현
  - [x] 이름, 전화번호, 계좌번호, 은행명 등 기본 정보 필드 구현
  - [x] 역할 관리(ADMIN, SELLER, VIEWER) Enum 구현
  - [x] BaseEntity 상속을 통한 timestamps 관리
- [x] 회원 가입 API 개발
  - [x] 이메일 중복 검증 로직 구현
  - [x] 비밀번호 암호화 저장
  - [ ] 이메일 인증 메일 발송 기능
- [x] 로그인 API 개발
  - [x] JWT 토큰 생성 및 발급
  - [x] 리프레시 토큰 구현
  - [ ] 로그인 시도 제한 기능
- [x] 로그아웃 API 개발
  - [x] 토큰 블랙리스트 관리

### 1.2 소셜 로그인 연동

- [x] 카카오톡 소셜 로그인 구현
  - [x] OAuth 인증 흐름 설계
  - [x] 카카오톡 API 연동
  - [x] 기존 계정과 연동 기능
- [ ] 소셜 계정 연결/해제 API 개발

### 1.3 사용자 권한 관리

- [ ] 역할 기반 접근 제어(RBAC) 구현
  - [ ] 역할별 권한 설정
  - [ ] Guard를 사용한 엔드포인트 접근 제어
- [ ] 관리자 권한 설정 API 개발
- [ ] 권한 검증 미들웨어 구현

### 1.4 프로필 관리

- [ ] 프로필 CRUD API 개발
  - [ ] 이름, 프로필 이미지, 연락처 등 업데이트 API
  - [ ] 계좌 정보 업데이트 API
  - [ ] 비밀번호 변경 API
- [ ] 프로필 이미지 업로드 기능
  - [ ] 이미지 저장소 구현
  - [ ] 이미지 크기 최적화 및 포맷 처리

### 1.5 셀러 관리

- [ ] 셀러 승인 요청 API 개발
  - [ ] 사업자 정보 검증 로직
  - [ ] 승인 대기 상태 관리
- [ ] 셀러 승인 처리 API 개발
  - [ ] 관리자 승인 절차
  - [ ] 승인 알림 발송
- [ ] 셀러 정보 관리 기능
  - [ ] 판매자 상세 정보 등록 및 관리
  - [ ] 판매 실적 통계 조회

## 2. 라이브 방송 시스템

### 2.1 방송 기본 CRUD

- [ ] 방송 엔티티 및 DTO 구현
  - [ ] 제목, 설명, 썸네일, 시작/종료 시간 필드 구현
  - [ ] 방송 상태 enum 구현(예정, 대기중, 방송중, 종료)
- [ ] 방송 생성 API 개발
  - [ ] 셀러 권한 검증
  - [ ] 썸네일 이미지 업로드
  - [ ] 방송 시간 예약 기능
- [ ] 방송 조회 API 개발
  - [ ] 현재 방송 중인 목록 조회
  - [ ] 예정된 방송 목록 조회
  - [ ] 인기/추천 방송 조회 로직
- [ ] 방송 수정 및 삭제 API 개발

### 2.2 라이브 스트리밍 연동

- [ ] Agora 서비스 연동
  - [ ] Agora SDK 통합
  - [ ] 채널 및 토큰 생성 API
  - [ ] 실시간 스트리밍 연결 관리
- [ ] 스트리밍 상태 모니터링
  - [ ] 스트리밍 품질 확인
  - [ ] 끊김 감지 및 복구 로직

### 2.3 방송 상태 관리

- [ ] 방송 상태 전환 API 개발
  - [ ] 방송 시작/종료 이벤트 처리
  - [ ] 예약 방송 자동 시작 스케줄러
- [ ] 방송 상태별 권한 관리
  - [ ] 방송 중 설정 변경 제한
  - [ ] 방송 종료 후 편집 기능

### 2.4 참가자 관리

- [ ] 방송 참가자 관리 API 개발
  - [ ] 참가자 목록 및 통계 조회
  - [ ] 실시간 시청자 수 관리
- [ ] 참가자 제한 기능
  - [ ] 최대 시청자 수 설정
  - [ ] 특정 사용자 참가 차단 기능
- [ ] VIP 참가자 우선 입장 기능

### 2.5 방송 종료 처리

- [ ] 방송 종료 후 통계 생성
  - [ ] 시청자 수, 평균 시청 시간 등 통계 수집
  - [ ] 판매 실적 통계 연계
- [ ] 방송 녹화 파일 관리
  - [ ] 녹화 파일 저장 및 인코딩
  - [ ] VOD 서비스 연동

## 3. 상품 관리 시스템

### 3.1 외부 상품 API 연동

- [ ] nhn shopby 어드민 API 연동
  - [ ] 인증 및 토큰 관리
  - [ ] 상품 정보 동기화 로직
- [ ] 상품 카테고리 매핑 구현

### 3.2 상품 정보 관리

- [ ] 상품 엔티티 및 DTO 구현
  - [ ] 상품명, 가격, 설명, 이미지 등 필드 구현
  - [ ] 상품 상태 관리(판매중, 품절, 판매중지 등)
- [ ] 상품 CRUD API 개발
  - [ ] 상품 등록 및 수정 API
  - [ ] 상품 검색 및 필터링 기능
  - [ ] 상품 이미지 관리 API

### 3.3 재고 관리

- [ ] 재고 엔티티 및 DTO 구현
  - [ ] 재고 수량, 입고/출고 이력 필드 구현
- [ ] 재고 관리 API 개발
  - [ ] 재고 업데이트 API
  - [ ] 재고 이력 조회 API
- [ ] 재고 알림 기능
  - [ ] 재고 부족 알림 설정
  - [ ] 자동 발주 시스템 연동

### 3.4 실시간 재고 처리

- [ ] 실시간 재고 차감 로직 개발
  - [ ] 동시성 제어 구현
  - [ ] 낙관적/비관적 락 전략 적용
- [ ] SoldOut 상태 자동 변경
  - [ ] 임계치 설정 및 관리
  - [ ] 상품 상태 자동 전환 로직

### 3.5 방송별 상품 관리

- [ ] 방송-상품 연결 구조 구현
  - [ ] 방송별 상품 목록 관리
  - [ ] 방송 중 상품 노출 순서 관리
- [ ] 방송 중 특별 할인 기능
  - [ ] 타임딜 상품 설정
  - [ ] 한정 수량 판매 기능

## 4. 판매 프로세스 시스템

### 4.1 구매 의사 등록

- [ ] 구매 의사 엔티티 및 DTO 구현
  - [ ] 사용자, 상품, 수량, 금액 등 필드 구현
  - [ ] 구매 의사 상태 관리(의사표시, 결제대기, 결제완료 등)
- [ ] 구매 의사 등록 API 개발
  - [ ] 실시간 구매 의사 등록 및 취소
  - [ ] 동시 구매 처리 로직

### 4.2 구매 프로세스

- [ ] 구매 프로세스 흐름 설계
  - [ ] 구매 의사 → 주문 → 결제 → 배송 흐름 구현
- [ ] 주문 상태 전환 API 개발
  - [ ] 상태별 권한 및 제약 조건 검증
  - [ ] 상태 변경 이벤트 발생 기능

### 4.3 주문 관리

- [ ] 주문 엔티티 및 DTO 구현
  - [ ] 주문 정보, 배송 정보, 결제 정보 필드 구현
  - [ ] 주문 상태 관리
- [ ] 주문 CRUD API 개발
  - [ ] 주문 생성 및 조회 API
  - [ ] 주문 취소 및 수정 API
- [ ] 주문 내역 조회 기능

### 4.4 배송 관리

- [ ] 배송 정보 엔티티 및 DTO 구현
  - [ ] 배송지, 배송 상태, 운송장 번호 등 필드 구현
- [ ] 배송 상태 추적 API 개발
  - [ ] 외부 배송 추적 서비스 연동
  - [ ] 배송 상태 업데이트 API

## 5. 결제 및 정산 시스템

### 5.1 계좌 이체 관리

- [ ] 계좌 정보 관리 API 개발
  - [ ] 은행명, 계좌번호, 예금주 등 저장 및 검증
  - [ ] 계좌 정보 암호화 저장
- [ ] 가상계좌 발급 연동(필요시)
  - [ ] 가상계좌 발급 API 연동
  - [ ] 가상계좌 입금 확인 웹훅 처리

### 5.2 입금 확인 처리

- [ ] 입금 확인 엔티티 및 DTO 구현
  - [ ] 입금자, 금액, 입금 시간 등 필드 구현
- [ ] 입금 확인 API 개발
  - [ ] 수동 입금 확인 처리
  - [ ] 자동 입금 확인 연동(가능시)
- [ ] 입금 불일치 처리 로직

### 5.3 주문 상태 관리

- [ ] 결제 상태에 따른 주문 상태 업데이트
  - [ ] 결제완료 → 주문확정 상태 전환
  - [ ] 미입금 주문 자동 취소 로직
- [ ] 결제 만료 시간 설정 및 관리

### 5.4 카드 결제(향후)

- [ ] 결제 게이트웨이 연동 설계
  - [ ] PG사 연동 인터페이스 설계
  - [ ] 결제 프로세스 흐름 구현
- [ ] 결제 요청 및 응답 처리
  - [ ] 결제 성공/실패 처리
  - [ ] 결제 정보 저장 및 관리

### 5.5 취소/환불 처리

- [ ] 취소/환불 정책 구현
  - [ ] 취소 가능 기간 및 조건 설정
  - [ ] 환불 금액 계산 로직
- [ ] 취소/환불 API 개발
  - [ ] 주문 취소 요청 처리
  - [ ] 환불 처리 및 결과 관리

### 5.6 정산 관리

- [ ] 정산 엔티티 및 DTO 구현
  - [ ] 정산 기준, 수수료, 정산 금액 등 필드 구현
- [ ] 정산 처리 API 개발
  - [ ] 정산 주기 설정 및 관리
  - [ ] 셀러별 정산 내역 생성
- [ ] 정산 내역 조회 기능

## 6. 알림 시스템

### 6.1 알림 인프라

- [ ] 알림 엔티티 및 DTO 구현
  - [ ] 알림 유형, 내용, 발송 상태 등 필드 구현
- [ ] 알림 발송 인터페이스 설계
  - [ ] 다양한 알림 채널 지원 구조
  - [ ] 알림 우선순위 및 정책 설정

### 6.2 알림톡 연동

- [ ] 카카오 알림톡 API 연동
  - [ ] 알림톡 템플릿 등록 및 관리
  - [ ] 알림톡 발송 요청 구현
- [ ] 대체 발송 처리(SMS 등)
  - [ ] 알림톡 실패 시 SMS 대체 발송

### 6.3 알림 템플릿

- [ ] 알림 템플릿 관리 시스템 개발
  - [ ] 템플릿 CRUD API
  - [ ] 변수 치환 기능 구현
- [ ] 다국어 지원(필요시)
  - [ ] 다국어 템플릿 관리
  - [ ] 사용자 언어 설정에 따른 발송

### 6.4 이벤트 기반 알림

- [ ] 이벤트-알림 연계 시스템 구현
  - [ ] 이벤트 구독 및 처리 로직
  - [ ] 알림 발송 조건 설정
- [ ] 주요 이벤트별 알림 구현
  - [ ] 회원가입, 주문, 배송, 결제 등 알림
  - [ ] 방송 시작 알림

### 6.5 알림 이력 관리

- [ ] 알림 이력 API 개발
  - [ ] 사용자별 알림 내역 조회
  - [ ] 알림 발송 결과 관리
- [ ] 알림 설정 관리
  - [ ] 알림 수신 동의 관리
  - [ ] 알림 유형별 설정 기능

## 7. 채팅 시스템

### 7.1 실시간 채팅 서버

- [ ] WebSocket 서버 구현
  - [ ] Socket.io 또는 대체 라이브러리 통합
  - [ ] 실시간 메시지 처리 로직
- [ ] 채팅방 관리 기능
  - [ ] 방송별 채팅방 생성 및 관리
  - [ ] 참가자 연결 관리

### 7.2 채팅 메시지 처리

- [ ] 채팅 메시지 엔티티 및 DTO 구현
  - [ ] 발신자, 내용, 시간 등 필드 구현
  - [ ] 메시지 유형 구분(일반, 공지, 구매알림 등)
- [ ] 메시지 필터링 기능
  - [ ] 금지어 필터링
  - [ ] 스팸 방지 로직

### 7.3 채팅 저장 및 조회

- [ ] 채팅 메시지 저장 로직
  - [ ] 실시간 메시지 DB 저장
  - [ ] 대용량 메시지 처리 최적화
- [ ] 채팅 내역 조회 API
  - [ ] 페이지네이션 처리
  - [ ] 실시간 업데이트 기능

### 7.4 특수 메시지 처리

- [ ] 구매 알림 자동 표시
  - [ ] 구매 이벤트 연동
  - [ ] 구매 메시지 우선 표시
- [ ] 공지사항 우선 표시
  - [ ] 고정 공지 기능
  - [ ] 공지 강조 표시

### 7.5 채팅 관리 기능

- [ ] 채팅 제한 및 차단 기능
  - [ ] 사용자 채팅 금지 설정
  - [ ] 도배 방지 시스템
- [ ] 채팅 모드 설정
  - [ ] 느린 모드, 구독자 전용 모드 등 설정

## 8. 포인트(가상화폐) 시스템

### 8.1 포인트 관리

- [ ] 포인트 엔티티 및 DTO 구현
  - [ ] 사용자, 잔액, 만료일 등 필드 구현
- [ ] 포인트 CRUD API 개발
  - [ ] 포인트 조회 및 관리 API
  - [ ] 포인트 만료 처리 로직

### 8.2 포인트 거래

- [ ] 포인트 충전 API 개발
  - [ ] 결제 시스템 연동
  - [ ] 충전 프로모션 기능
- [ ] 포인트 사용 API 개발
  - [ ] 포인트 결제 처리
  - [ ] 포인트 사용 취소 기능

### 8.3 포인트 이력

- [ ] 포인트 거래 이력 관리
  - [ ] 거래 유형, 금액, 시간 등 기록
  - [ ] 거래 ID 및 참조 정보 연계
- [ ] 포인트 이력 조회 API
  - [ ] 필터링 및 정렬 기능

### 8.4 방송 참가자 증설 결제

- [ ] 참가자 수 확장 기능 구현
  - [ ] 기본 및 확장 제한 설정
  - [ ] 증설 요금 체계 구현
- [ ] 포인트 결제 로직
  - [ ] 방송별 포인트 사용 내역 관리
  - [ ] 미사용 증설 환불 정책

## 9. 데이터 분석 및 로깅

### 9.1 로깅 인프라

- [ ] 로깅 시스템 설계
  - [ ] 구조화된 로그 형식 정의
  - [ ] 로그 레벨 및 정책 설정
- [ ] 로그 수집 및 저장
  - [ ] ELK 스택 또는 대체 솔루션 구축
  - [ ] 로그 보관 정책 설정

### 9.2 방송 분석

- [ ] 방송 시청 로그 수집
  - [ ] 시청자 수, 시청 시간 등 지표 수집
  - [ ] 시청자 행동 분석 지표
- [ ] 방송 분석 대시보드 API
  - [ ] 실시간 및 누적 지표 제공
  - [ ] 성과 분석 리포트

### 9.3 상품 및 판매 분석

- [ ] 상품 구매 로그 관리
  - [ ] 상품별, 방송별 판매 데이터 수집
  - [ ] 구매 전환율 및 CTR 측정
- [ ] 판매 분석 API 개발
  - [ ] 판매 추이 및 예측 분석
  - [ ] 재고 회전율 분석

### 9.4 결제 및 정산 분석

- [ ] 결제/정산 로그 시스템
  - [ ] 결제 성공률, 취소율 등 지표 수집
  - [ ] 정산 현황 및 추이 데이터
- [ ] 재무 분석 API
  - [ ] 매출 및 수익 분석
  - [ ] 채널별 성과 분석

### 9.5 모니터링 및 알림

- [ ] 시스템 모니터링 구현
  - [ ] 서버 자원 및 성능 모니터링
  - [ ] API 응답 시간 및 오류율 측정
- [ ] 에러/예외 로깅 및 알림
  - [ ] 중요 오류 실시간 알림
  - [ ] 오류 추적 및 분석 시스템

## 10. 보안 및 인프라

### 10.1 데이터 보안

- [ ] 민감 정보 암호화
  - [ ] 개인정보 및 계좌정보 암호화 저장
  - [ ] 암호화 키 관리 시스템
- [ ] 데이터 접근 제어
  - [ ] 데이터 접근 권한 설정
  - [ ] 데이터 접근 로깅 및 감사

### 10.2 API 보안

- [ ] 인증/인가 시스템 개발
  - [ ] JWT 기반 인증 구현
  - [ ] Role 기반 접근 제어
- [ ] API 요청 제한
  - [ ] Rate limiting 구현
  - [ ] IP 기반 접근 제한

### 10.3 네트워크 보안

- [ ] HTTPS/TLS 적용
  - [ ] SSL 인증서 설정
  - [ ] HTTPS 리다이렉션 설정
- [ ] 보안 헤더 설정
  - [ ] CORS 설정
  - [ ] XSS, CSRF 방어 설정

### 10.4 인프라 설계

- [ ] 서버 아키텍처 설계
  - [ ] 마이크로서비스 구조 검토
  - [ ] 컨테이너 기반 배포 설계
- [ ] 데이터베이스 설계
  - [ ] 샤딩 및 복제 설계
  - [ ] 백업 및 복구 전략

### 10.5 확장성 관리

- [ ] 자동 스케일링 설정
  - [ ] 수평/수직 확장 전략
  - [ ] 부하 테스트 및 용량 계획
- [ ] 트래픽 급증 대응
  - [ ] 캐싱 전략 구현
  - [ ] CDN 활용 설계
  - [ ] 대규모 동시 접속 처리 최적화

## 11. 외부 서비스 연동

### 11.1 상품 관리 연동

- [ ] nhn shopby 어드민 연동
  - [ ] 인증 및 API 클라이언트 구현
  - [ ] 상품 정보 동기화 스케줄러
- [ ] 상품 데이터 매핑 및 변환
  - [ ] 데이터 형식 변환
  - [ ] 동기화 오류 처리

### 11.2 스트리밍 서비스 연동

- [ ] Agora 스트리밍 서비스 연동
  - [ ] 채널 생성 및 관리
  - [ ] 토큰 생성 및 인증
- [ ] 스트리밍 품질 관리
  - [ ] 품질 모니터링
  - [ ] 장애 감지 및 복구

### 11.3 메시징 서비스 연동

- [ ] 카카오톡 API 연동
  - [ ] 메시지 발송 클라이언트
  - [ ] 발송 결과 처리 및 재시도
- [ ] 이메일 서비스 연동
  - [ ] 이메일 템플릿 및 발송 관리
  - [ ] 발송 실패 처리

### 11.4 고객 지원 연동

- [ ] 채널톡 연동
  - [ ] 채팅 위젯 연동
  - [ ] 메시지 API 연동
- [ ] 오픈 카카오톡 연동
  - [ ] 그룹 관리 및 초대 자동화
  - [ ] 메시지 전달 시스템
